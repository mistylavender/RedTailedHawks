<!-- This page is illustrative and contains ideas about HTML formatting -->
<!DOCTYPE HTML>
<!-- Signals to the Layout Dialect which layout should be used to decorate this View -->
<html xmlns:layout="http://www.w3.org/1999/xhtml" xmlns:th="http://www.w3.org/1999/xhtml"
      layout:decorate="~{layout}" lang="en">

<head><div layout:fragment="metadata" th:remove="tag">
    <title>Art Gallery</title>
</div></head>

<!-- <body> -->
<!-- layout::fragment="content" is heart of ThymeLeaf layout -->
<body><div layout:fragment="content" th:remove="tag">
    <div class="row" style="padding:100px;">

        <html xmlns:layout="http://www.w3.org/1999/xhtml"
              xmlns:th="http://www.w3.org/1999/xhtml"
              layout:decorate="~{layout}" lang="en">

        <div layout:fragment="head" th:remove="tag">
            <title>Student Search</title>
        </div>

        <div layout:fragment="body" th:remove="tag">
            <div class="container py-4 bg-primary">
                <!-- heading -->
                <header class="pb-3 mb-4 border-bottom">
                    <a href="#" class="d-flex align-items-center text-light text-decoration-none">
                        <span class="fs-4">Database SQL Person Search</span>
                    </a>
                </header>
                <!-- search box -->
                <div class="container py-4 text-light bg-success">
                    <div class="row">
                        <div class="col">
                            <div class="mb-3">
                                <div class="form-group">
                                    <label for="term">Enter search term?</label>
                                    <input type="text" class="form-control" id="term" placeholder="enter search term">
                                    <label></label> <!-- used for spacer -->
                                </div>
                                <button class="btn btn-primary bg-secondary" onclick="search_data();">Search</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- result of search -->
            <div class="container">
                <div class="row" id="result">
                </div>
            </div>

            <script>
                function search_data() {
                    // fetch standard requires database set to a name-value pair
                    const term = document.getElementById("term");
                    const body = {
                        term: term.value,
                        foo: "bar"
                    };

                    // fetch call with header options
                    fetch('/api/person/search', {
                        method: "POST",
                        credentials: "include",
                        body: JSON.stringify(body),
                        cache: "no-cache",
                        headers: new Headers({
                            "content-type": "application/json"
                        })
                    })
                        // async then replies with response header
                        .then(function (response) {
                            // prepare HTML search result container for new output
                            const resultContainer = document.getElementById("result");
                            // clean up from previous search
                            while (resultContainer.firstChild) {
                                resultContainer.removeChild(resultContainer.firstChild);
                            }
                            // trap error response from Web API
                            if (response.status !== 200) {
                                const errorMsg = 'Database response error: ' + response.status;
                                console.log(errorMsg);
                                const div = document.createElement("div");
                                div.innerHTML = errorMsg;
                                resultContainer.appendChild(div);
                                return;
                            }
                            // response contains valid result
                            response.json().then(function(data) {
                                // loop through JSON and build HTML output
                                for (let i = 0; i < data.length; i++) {
                                    const div = document.createElement("div");
                                    div.innerHTML = data[i].name + ' ' + data[i].email;
                                    resultContainer.appendChild(div);
                                }
                            })
                        })
                }
            </script>


        <!--    <div class="row justify-content-md-center flex-container" style="padding:10px; width:1000px;" >-->
        <!--        <table class="table">-->
        <!--            <tr th:each="value: ${gameList}">-->
        <!--                <div>-->
        <!--                    <div class="card" style="width:300px; margin:10px;">-->
        <!--                        <img th:src="${value[2]}" class="card-img-top" style="height:200px;">-->
        <!--                        <div class="card-body">-->
        <!--                            <a class="bodytext" style="text-align:left">Title:</a>-->
        <!--&lt;!&ndash;                            <p class="card-text titlehead" th:text="${value[0]}"></p>&ndash;&gt;-->
        <!--                            <a class="bodytext" style="text-align:left">Artist:</a>-->
        <!--&lt;!&ndash;                            <a class="card-text bodytext" th:text="${value[3]}"></a></br>&ndash;&gt;-->
        <!--&lt;!&ndash;                            <a style="text-align:left" class="bodytext">Playtime (in hours): </a>&ndash;&gt;-->
        <!--&lt;!&ndash;                            <a class="card-text bodytext" th:text="${value[4]}" ></a></br>&ndash;&gt;-->
        <!--&lt;!&ndash;                            <h6 class="card-text" th:text="${value[1]}"></h6>&ndash;&gt;-->
        <!--                        </div>-->
        <!--                        <script>-->
        <!--                            ScrollReveal().reveal('.card', {-->
        <!--                                interval: 16,-->
        <!--                                reset: true,-->
        <!--                                useDelay: 'onload'-->
        <!--                            })-->

        <!--                        </script>-->
        <!--                    </div>-->
        <!--                </div>-->
        <!--            </tr>-->
        <!--        </table>-->
        <!--    </div>-->

        <div class="row justify-content-md-center flex-container" style="padding:10px; width:1000px;" >
            <table class="table">
            </table>
            <tr>
                <div>
                    <div class="card" style="width:300px; margin:10px;">
                        <img src="https://media.istockphoto.com/vectors/thumbnail-image-vector-graphic-vector-id1147544807?k=20&m=1147544807&s=612x612&w=0&h=pBhz1dkwsCMq37Udtp9sfxbjaMl27JUapoyYpQm0anc=" class="card-img-top" style="height:200px;">
                        <div class="card-body">
                            <a class="bodytext" style="text-align:left">Title:</a>
                        </div>
                    </div>
                </div>

                <div>
                    <div class="card" style="width:300px; margin:10px;">
                        <img src="https://media.istockphoto.com/vectors/thumbnail-image-vector-graphic-vector-id1147544807?k=20&m=1147544807&s=612x612&w=0&h=pBhz1dkwsCMq37Udtp9sfxbjaMl27JUapoyYpQm0anc=" class="card-img-top" style="height:200px;">
                        <div class="card-body">
                            <a class="bodytext" style="text-align:left">Title:</a>
                        </div>
                    </div>
                </div>

                <div>
                    <div class="card" style="width:300px; margin:10px;">
                        <img src="https://media.istockphoto.com/vectors/thumbnail-image-vector-graphic-vector-id1147544807?k=20&m=1147544807&s=612x612&w=0&h=pBhz1dkwsCMq37Udtp9sfxbjaMl27JUapoyYpQm0anc=" class="card-img-top" style="height:200px;">
                        <div class="card-body">
                            <a class="bodytext" style="text-align:left">Title:</a>
                        </div>
                    </div>
                </div>
            </tr>
        </div>

    </div>
</body>


</html>